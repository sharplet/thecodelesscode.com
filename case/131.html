<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" >
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
  <meta name="description" content="An illustrated collection of (sometimes violent) fables, concerning the Art and Philosophy of software development"></meta>
  <meta name="keywords" content="software, koans, software koans, computer, wisdom, zen, buddhism, the gateless gate, java"></meta>

<!-- Enable reponsive web design -->
<meta content="True" name="HandheldFriendly">




  <title>
    The Codeless Code:
    Case 131 Don't Think  </title>
  <link rel="shortcut icon" href="/images/tcc-favicon.ico" ></link>
  <link rel="stylesheet" type="text/css"
	    id="tcc-css-link"
	    href="/css/tcc.css" ></link>



  <link rel="stylesheet" type="text/css"
	    id="tcc-contents-css-link"
	    href="/css/tcc-contents.css" ></link>
  <link rel="alternate" type="application/rss+xml"
        title="The Codeless Code (RSS)"
        href="http://thecodelesscode.com/rss" ></link>


  <link href='http://fonts.googleapis.com/css?family=Shadows+Into+Light|Shadows+Into+Light+Two|Quintessential' rel='stylesheet' type='text/css'>


  <script type="text/javascript"
          src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript" src="/js/stickySidebar.js"></script>
  <script type="text/javascript" src="/js/dk.js?1"></script>

  <!-- Google Analytics, for website stats -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22171819-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>
<body>

   <table id="bodytable" class="layout">

    


      <tr id="toprow">
        <td colspan="2" id="topcircuits"><div id="tcc-case-title-box"><a href="/contents"><img id='tcc-case-title' src='/images/tcc-case-title-link.png' alt='tcc-case-title' width='364' height='58' onmouseover="DkNavMouseOver('tcc-case-title')" onmouseout="DkNavMouseOut('tcc-case-title')"/></a></div></td>
        </td>
      </tr>
      <tr id="bodyrow" >
        <td id="sidebar"
          ><img id="homecap" src="/images/homecap.png" alt=""
               width="155" height="93"
         /><table class="layout">
            <tr>
              <td colspan="2"
                ><a href="/contents"><img id='home' src='/images/home-link.png' alt='home' width='155' height='73' onmouseover="DkNavMouseOver('home')" onmouseout="DkNavMouseOut('home')"/></a></td>
            </tr>
            <tr>
              <td><a href="/case/130"><img id='prev' src='/images/prev-link.png' alt='prev' width='83' height='62' onmouseover="DkNavMouseOver('prev')" onmouseout="DkNavMouseOut('prev')"/></a></td>
              <td><a href="/case/132"><img id='next' src='/images/next-link.png' alt='next' width='72' height='62' onmouseover="DkNavMouseOver('next')" onmouseout="DkNavMouseOut('next')"/></a></td>
            </tr>
            <tr>
              <td colspan="2"
                ><a href="/case/random"><img id='random' src='/images/random-link.png' alt='random' width='155' height='73' onmouseover="DkNavMouseOver('random')" onmouseout="DkNavMouseOut('random')"/></a></td>
            </tr>


            <tr><td colspan="2"><img src="/images/leftcap.png" alt=""
                width=155 height=31/></td></tr>
            <tr><td colspan="2"><img src="/images/left.png" alt=""
                width=155 height=466/></td></tr>
            <tr><td colspan="2"><img src="/images/leftfoot.png" alt=""
                width=155 height=41/></td></tr>


            </table>
        </td>

        <td id="content" >
        <div id="topmenu">

          <div id="textmenu">
           <a href='/contents'>Contents</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/topics'>Topics</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/names'>Names</a><span class="barlong">&#x00A0;</span><a href='/case/first'>First</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/case/130'>Previous</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/case/132'>Next</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/case/last'>Last</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/case/random'>Random</a><span class="barlong">&#x00A0;</span><a href='/about'>About</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/rss'><span class='tiny-rssr'></span></a><span class="barlong">&#x00A0;</span>        </div>
        <div id="tinymenu">

           <span class="menu-group">
                <a href='/contents' title='Contents'>^</a>           </span>

           <span class="menu-group">
                <a href='/case/first' title='First'>|<</a>                <a href='/case/130' title='Previous'><</a>                <a href='/case/132' title='Next'>></a>                <a href='/case/last' title='Last'>>|</a>                <a href='/case/random' title='Random'>&#x2683;</a>           </span>

           <span class="menu-group">
                <a href='/about' title='About'><i>i</i></a>                <a href='/rss'><span class='tiny-rssr'></span></a>           </span>

        </div>


        <div id="langmenu"><span class='trans-menu-button' id='caseLangMenu-button' style='position:relative'>
<span id='caseLangMenu' class='trans popup'>
<a class='nolink'><span class='trans-about'>English<br />Original text by Qi</span><span class='trans-lang'>EN</span></a>
<a href='/case/131?lang=es&trans=galcalde'><span class='trans-about'>Spanish / Español<br />Traducido por Gonzalo Alcalde</span><span class='trans-lang'>ES</span></a>
<a href='/case/131?lang=fr&trans=abelards'><span class='trans-about'>French / Français<br />Traduit par Sylvain Abélard</span><span class='trans-lang'>FR</span></a>
<a href='/case/131?lang=it&trans=alessandro1997'><span class='trans-about'>Italian / Italiano<br />Tradotto da Alessandro Desantis</span><span class='trans-lang'>IT</span></a>
<a href='/case/131?lang=ru&trans=smal'><span class='trans-about'>Russian / русский<br />Перевод Sergey Malenkov</span><span class='trans-lang'>RU</span></a>
</span>
<span class='tiny-trans' title='Translations' /></span>
</div>
    </div>



<div id="titles" ><div class='case-geekiness'>moderately geeky&nbsp;&nbsp;<span style="cursor:help" onclick="DkPopUpGeekinessHelp()" title="moderately geeky"><img src="/images/geek2.png" alt="moderately geeky" width="28" height="11" border="0" /></span></div><h2 class="supertitle"><a class='subtle' href='/contents'>Case 131</a></h2><h1 class="title"><a class='subtle' href='/contents'>Don't Think</a></h1></div><div id="contenttext" class="contenttext" >


<div class='story koan'><img src="/pages/case-131/skulls.jpg" alt="" title="For most people, this is second nature." class="illus-right"/>


<p>A new monk of <a href='/names/Elephant%27s+Footprint+Clan'>Elephant's Footprint Clan</a> noticed that all
brothers under master <a href='/names/Bawan'>Bawan</a>’s tutelage answered
questions promptly, without the slightest pause.  Those who
hesitated were given a swift rap on the head with the
master’s staff, after which they were to remain silent for
the rest of the day&mdash;assuming, of course, that they had
not been knocked unconscious by the blow.</p>

<p>The young monk asked one of the brothers, “Why does Bawan
punish those who delay in their answers?”</p>

<p>“Because he believes them to be thinking,” said the elder
monk.  He indicated a row of skulls set on a ledge above the
master’s door.  Some were dull and dusty while others
appeared to be freshly-parted from their previous owners,
but carved into the forehead of each were the words <i>DON’T
THINK</i> in the master’s unmistakable script.</p>

<p>The elder monk departed, leaving the younger to ponder
Bawan’s algorithm.</p>

<img class="break" src="/images/hrule.png" alt="- - -" />

<p>Some time later these same two monks were working furiously
through the night to upgrade one of the clan’s venerable
document databases.  Critical systems were offlined while
the old documents were migrated to the new servers.</p>

<p>The conversion script ran for hours, yet failed near the
end due to a minor problem.  A second run was started, but
since dawn was fast approaching the monks specified that any
documents which had already been written by the first run
should be skipped.</p>

<p>As the second run sped through the portion of the database
that the first already processed, Bawan noticed something
curious.  Many thousands of status messages scrolled past
which looked like this:</p>

<pre>
   document 2677091: skipped (already exists)
   document 2677092: skipped (already exists)
   document 2677093: skipped (already exists)
</pre>

<p>Yet once in a while one would appear which looked like this:</p>

<pre>
   document 2677094: skipped (already exists) (** source is newer)
</pre>

<p>“Why the difference?” demanded Bawan.</p>

<p>“I cannot say,” said the elder monk quickly.
Bawan snorted and struck the man’s cheek with the back of
his hand.  Then he turned to the younger monk.</p>

<p>“Why the difference?” he repeated.</p>

<p>In that instant&mdash;his mind racing between thoughts of the
master’s hand and the master’s staff&mdash;the young monk
received a flash of insight.</p>

<p>“Clock skew,” declared the young monk.  “When we pull a
source document from the old server we preserve its
modification time, and then we create the target document.
Yet if the system clocks disagree, the script will
sometimes believe that the source is newer than the
target.”</p>

<p>The master indeed found a small time discrepancy between the
two servers.  He nodded approvingly and departed, leaving
the young monk to bask in the satisfaction of having
understood Bawan’s algorithm.</p>

<img class="break" src="/images/hrule.png" alt="- - -" />

<p>One day later Bawan ordered the clan to assemble outside his
office.  As all waited for the master to appear, the elder monk
whispered that Bawan had spent the whole day assembling definitive
evidence that clock skew was responsible for the odd messages.</p>

<p>“What did he find?” asked a nun.</p>

<p>“Nothing of the sort,” said the elder monk. “In truth, one
server had accidentally been left running during the
migration, so users were still making edits in the old
database.  The second conversion skipped these documents
with the observed warning.  When traffic was diverted to the
new database, subsequent user edits made restoration of
the lost edits impossible.  It will be a great
embarrassment for the clan.”</p>

<p>The discussion halted abruptly as Bawan emerged from his
office with a ladder, which he then ascended to place a
glistening new skull on the ledge above his door.  The
skull’s features recalled those of the young monk, who had
not been seen all day.  As before, the words <i>DON’T THINK</i>
were inscribed on the forehead.  And on the jawbone&mdash;invisible to anyone standing below the ledge but quite
legible as the master carried it up&mdash;was the single word,
<i>KNOW.</i></p>

</div><div class='footerTags'><span class='footerTagsPrompt'>Topics</span>... &nbsp;<span class='footerTagList'><a href='/topics/production+support'>production support</a></span></div>
          <div id="copyright">

<p>
An excerpt from <i><a href='/contents'>The Codeless Code</a></i>, by Qi (<a href='mailto:qi@thecodelesscode.com'>qi@thecodelesscode.com</a>).</p>

<p>
     Provided under the      <a href="http://creativecommons.org/licenses/by-nc/3.0/"
      >Creative Commons Attribution-NonCommercial 3.0 Unported License.</a>
</p>



            </div>

          </div>  <!-- #contenttext -->
        </td>  <!-- #content -->
      </tr>  <!-- #bodyrow -->
    </table>  <!-- #bodytable -->
  <div id="img_preload" style="display:none"><div style='display:none'><img src='/images/home.png'/><img src='/images/home-hover.png'/><img src='/images/home-link.png'/></div><div style='display:none'><img src='/images/prev.png'/><img src='/images/prev-hover.png'/><img src='/images/prev-link.png'/></div><div style='display:none'><img src='/images/next.png'/><img src='/images/next-hover.png'/><img src='/images/next-link.png'/></div><div style='display:none'><img src='/images/random.png'/><img src='/images/random-hover.png'/><img src='/images/random-link.png'/></div><div style='display:none'><img src='/images/tcc-case-title.png'/><img src='/images/tcc-case-title-hover.png'/><img src='/images/tcc-case-title-link.png'/></div><div style='display:none'><img src='/images/casemenuitem.png'/></div><div style='display:none'><img src='/images/casemenuitem-hover.png'/></div><div style='display:none'><img src='/images/casemenuitem-here.png'/></div><div style='display:none'><img src='/images/casemenuitem-help.png'/></div></div>
  </body>
</html>


