<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" >
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
  <meta name="description" content="An illustrated collection of (sometimes violent) fables, concerning the Art and Philosophy of software development"></meta>
  <meta name="keywords" content="software, koans, software koans, computer, wisdom, zen, buddhism, the gateless gate, java"></meta>

<!-- Enable reponsive web design -->
<meta content="True" name="HandheldFriendly">




  <title>
    The Codeless Code:
    Case 134 Thin Ice  </title>
  <link rel="shortcut icon" href="/images/tcc-favicon.ico" ></link>
  <link rel="stylesheet" type="text/css"
	    id="tcc-css-link"
	    href="/css/tcc.css" ></link>



  <link rel="stylesheet" type="text/css"
	    id="tcc-contents-css-link"
	    href="/css/tcc-contents.css" ></link>
  <link rel="alternate" type="application/rss+xml"
        title="The Codeless Code (RSS)"
        href="http://thecodelesscode.com/rss" ></link>


  <link href='http://fonts.googleapis.com/css?family=Shadows+Into+Light|Shadows+Into+Light+Two|Quintessential' rel='stylesheet' type='text/css'>


  <script type="text/javascript"
          src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript" src="/js/stickySidebar.js"></script>
  <script type="text/javascript" src="/js/dk.js?1"></script>

  <!-- Google Analytics, for website stats -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22171819-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>
<body>

   <table id="bodytable" class="layout">

    


      <tr id="toprow">
        <td colspan="2" id="topcircuits"><div id="tcc-case-title-box"><a href="/contents"><img id='tcc-case-title' src='/images/tcc-case-title-link.png' alt='tcc-case-title' width='364' height='58' onmouseover="DkNavMouseOver('tcc-case-title')" onmouseout="DkNavMouseOut('tcc-case-title')"/></a></div></td>
        </td>
      </tr>
      <tr id="bodyrow" >
        <td id="sidebar"
          ><img id="homecap" src="/images/homecap.png" alt=""
               width="155" height="93"
         /><table class="layout">
            <tr>
              <td colspan="2"
                ><a href="/contents"><img id='home' src='/images/home-link.png' alt='home' width='155' height='73' onmouseover="DkNavMouseOver('home')" onmouseout="DkNavMouseOut('home')"/></a></td>
            </tr>
            <tr>
              <td><a href="/case/133"><img id='prev' src='/images/prev-link.png' alt='prev' width='83' height='62' onmouseover="DkNavMouseOver('prev')" onmouseout="DkNavMouseOut('prev')"/></a></td>
              <td><a href="/case/135"><img id='next' src='/images/next-link.png' alt='next' width='72' height='62' onmouseover="DkNavMouseOver('next')" onmouseout="DkNavMouseOut('next')"/></a></td>
            </tr>
            <tr>
              <td colspan="2"
                ><a href="/case/random"><img id='random' src='/images/random-link.png' alt='random' width='155' height='73' onmouseover="DkNavMouseOver('random')" onmouseout="DkNavMouseOut('random')"/></a></td>
            </tr>


            <tr><td colspan="2"><img src="/images/leftcap.png" alt=""
                width=155 height=31/></td></tr>
            <tr><td colspan="2"><img src="/images/left.png" alt=""
                width=155 height=466/></td></tr>
            <tr><td colspan="2"><img src="/images/leftfoot.png" alt=""
                width=155 height=41/></td></tr>


            </table>
        </td>

        <td id="content" >
        <div id="topmenu">

          <div id="textmenu">
           <a href='/contents'>Contents</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/topics'>Topics</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/names'>Names</a><span class="barlong">&#x00A0;</span><a href='/case/first'>First</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/case/133'>Previous</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/case/135'>Next</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/case/last'>Last</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/case/random'>Random</a><span class="barlong">&#x00A0;</span><a href='/about'>About</a>&nbsp;<span class="bar">&#x00b7;</span>&nbsp;<a href='/rss'><span class='tiny-rssr'></span></a><span class="barlong">&#x00A0;</span>        </div>
        <div id="tinymenu">

           <span class="menu-group">
                <a href='/contents' title='Contents'>^</a>           </span>

           <span class="menu-group">
                <a href='/case/first' title='First'>|<</a>                <a href='/case/133' title='Previous'><</a>                <a href='/case/135' title='Next'>></a>                <a href='/case/last' title='Last'>>|</a>                <a href='/case/random' title='Random'>&#x2683;</a>           </span>

           <span class="menu-group">
                <a href='/about' title='About'><i>i</i></a>                <a href='/rss'><span class='tiny-rssr'></span></a>           </span>

        </div>


        <div id="langmenu"><span class='trans-menu-button' id='caseLangMenu-button' style='position:relative'>
<span id='caseLangMenu' class='trans popup'>
<a class='nolink'><span class='trans-about'>English<br />Original text by Qi</span><span class='trans-lang'>EN</span></a>
<a href='/case/134?lang=es&trans=galcalde'><span class='trans-about'>Spanish / Español<br />Traducido por Gonzalo Alcalde</span><span class='trans-lang'>ES</span></a>
<a href='/case/134?lang=fr&trans=abelards'><span class='trans-about'>French / Français<br />Traduit par Sylvain Abélard</span><span class='trans-lang'>FR</span></a>
<a href='/case/134?lang=it&trans=alessandro1997'><span class='trans-about'>Italian / Italiano<br />Tradotto da Alessandro Desantis</span><span class='trans-lang'>IT</span></a>
<a href='/case/134?lang=ru&trans=smal'><span class='trans-about'>Russian / русский<br />Перевод Sergey Malenkov</span><span class='trans-lang'>RU</span></a>
</span>
<span class='tiny-trans' title='Translations' /></span>
</div>
    </div>



<div id="titles" ><div class='case-geekiness'>extremely geeky&nbsp;&nbsp;<span style="cursor:help" onclick="DkPopUpGeekinessHelp()" title="extremely geeky"><img src="/images/geek3.png" alt="extremely geeky" width="28" height="11" border="0" /></span></div><h2 class="supertitle"><a class='subtle' href='/contents'>Case 134</a></h2><h1 class="title"><a class='subtle' href='/contents'>Thin Ice</a></h1></div><div id="contenttext" class="contenttext" >


<div class='story koan'><img src="/pages/case-134/pole.jpg" alt="" title="P.S. -- We *were* able to fill in a few of the shallower holes with landmines." class="illus-right"/>


<p>The monk <a href='/names/Djishin'>Djishin</a> had grown dispirited from
<a href='/case/78'>toiling on obscure projects</a> for the <a href='/names/One+Shoe+Clan'>One Shoe Clan</a>,
far removed from the bustle of temple life.
He appealed to master <a href='/names/Banzen'>Banzen</a> for more meaningful work.</p>

<p>Said Banzen, “I can think of one application whose codebase
has grown confused over the years, owing to its many owners.
I suspect it hides much rubbish which may be cleared away.”</p>

<p>When Banzen examined Djishin’s refactoring he found the
code to be well-organized and greatly simplified.  The most
dramatic reduction had been in the number of Data Transfer
Object classes.</p>

<p>“I retained only those classes which map directly to
database tables,” Djishin explained proudly.  “See, here is
a query which joins the Campaign, Soldier, and Specialty
tables, fetching but two columns from each.  Previously
there was a DTO whose only purpose was to return the six
values for each row&mdash;shameful!  Now the query returns a
list of Campaign instances, each holding a list of Soldiers,
each in turn holding a list of Specialties.  True, the
presentation layer must now traverse these objects, but they
are common throughout the application and will be familiar
to all who labor upon it.”</p>

<p>Banzen stroked his beard.  “You have adopted the ways of
the Object-Relational Mapping, in a framework of your own
devising.  I am acquainted with the virtues of this
approach, but also with its vices.  These three tables have
about twenty columns each; the domain objects which mirror
them have likewise twenty fields.  So now instead of fetching
six columns per row, are you fetching sixty?  Or executing the
query in three passes?  Or employing some sort of cache?”</p>

<p>“None of these,” said Djishin with satisfaction.  “I fetch
only the original six columns, plus primary keys.  All other
fields in the domain objects are simply left uninitialized.”</p>

<p>Banzen sighed and reached for his staff.</p>

<img class="break" src="/images/hrule.png" alt="- - -" />

<p>Djishin awoke outside with a pounding headache, covered by a
blanket of new-fallen snow.  He was alone in the middle
of a tidy, perfectly level field surrounded by great pines.
All gleamed white in the morning sun, and a few flurries
were still spinning through the air.</p>

<p>At his feet a long stick had been thrust into the ground.
A note was tied around the middle.  Djishin unrolled it.</p>

<blockquote>    I ordered the One Shoe Clan to remove all the refuse
    from the temple’s rubbish yard.  Is it not lovely now?</blockquote>

<blockquote>    Sadly, this left behind many deep pits that would
    require too much effort to fill, so we covered the
    tops quite artfully with the thinnest layer of branches
    and leaves.  Since a good snow has been forecast
    for this evening, I expect you will awaken to a
    picture of perfection.</blockquote>

<blockquote>    Watch your step,</blockquote>

<blockquote>    B.
</blockquote>

</div><div class='footerTags'><span class='footerTagsPrompt'>Topics</span>... &nbsp;<span class='footerTagList'><a href='/topics/data+transfer+objects'>data transfer objects</a>, <a href='/topics/partial+initialization'>partial initialization</a>, <a href='/topics/null'>null</a>, <a href='/topics/null+pointer+exception'>null pointer exception</a>, <a href='/topics/object-relational+mapping'>object-relational mapping</a></span></div>
          <div id="copyright">

<p>
An excerpt from <i><a href='/contents'>The Codeless Code</a></i>, by Qi (<a href='mailto:qi@thecodelesscode.com'>qi@thecodelesscode.com</a>).</p>

<p>
     Provided under the      <a href="http://creativecommons.org/licenses/by-nc/3.0/"
      >Creative Commons Attribution-NonCommercial 3.0 Unported License.</a>
</p>



            </div>

          </div>  <!-- #contenttext -->
        </td>  <!-- #content -->
      </tr>  <!-- #bodyrow -->
    </table>  <!-- #bodytable -->
  <div id="img_preload" style="display:none"><div style='display:none'><img src='/images/home.png'/><img src='/images/home-hover.png'/><img src='/images/home-link.png'/></div><div style='display:none'><img src='/images/prev.png'/><img src='/images/prev-hover.png'/><img src='/images/prev-link.png'/></div><div style='display:none'><img src='/images/next.png'/><img src='/images/next-hover.png'/><img src='/images/next-link.png'/></div><div style='display:none'><img src='/images/random.png'/><img src='/images/random-hover.png'/><img src='/images/random-link.png'/></div><div style='display:none'><img src='/images/tcc-case-title.png'/><img src='/images/tcc-case-title-hover.png'/><img src='/images/tcc-case-title-link.png'/></div><div style='display:none'><img src='/images/casemenuitem.png'/></div><div style='display:none'><img src='/images/casemenuitem-hover.png'/></div><div style='display:none'><img src='/images/casemenuitem-here.png'/></div><div style='display:none'><img src='/images/casemenuitem-help.png'/></div></div>
  </body>
</html>


